<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Network teaming – RHEL7 | Vignesh Ragupathy</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Network teaming – RHEL7" />
<meta name="author" content="Vignesh Ragupathy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction" />
<meta property="og:description" content="Introduction" />
<link rel="canonical" href="http://0.0.0.0:4000/network-teaming-rhel7/" />
<meta property="og:url" content="http://0.0.0.0:4000/network-teaming-rhel7/" />
<meta property="og:site_name" content="Vignesh Ragupathy" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-10-07T11:35:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Network teaming – RHEL7" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Vignesh Ragupathy"},"@type":"BlogPosting","description":"Introduction","headline":"Network teaming – RHEL7","url":"http://0.0.0.0:4000/network-teaming-rhel7/","datePublished":"2017-10-07T11:35:00+00:00","dateModified":"2017-10-07T11:35:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/network-teaming-rhel7/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <link href="/css/github.css" rel="stylesheet">


  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/content/images/favicon/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/content/images/favicon/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/content/images/favicon/touch-icon-iphone.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Vignesh Ragupathy" />

  <!-- Google Analytics-->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YL89JLMQRY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YL89JLMQRY');
</script>
  
  
  





  

  <!-- Twitter cards -->
<meta name="twitter:site"    content="@vikkiintweet">
<meta name="twitter:creator" content="@Vignesh Ragupathy">
<meta name="twitter:title"   content="Network teaming – RHEL7">


<meta name="twitter:description" content="Vignesh Ragupathy's blog">



<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="">

<!-- end of Twitter cards -->
</head>


  <body>

    <!--
<nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">Vignesh Ragupathy</h2>
    </a>
    <ul>
      <li><a href="/tools">Tools developed</a></li>
      <li><a href="/videos">Videos</a></li>
      <li><a href="/about-me">About me</a></li>
    </ul>
  </div>
</nav>
-->

<div id="navbar">
  <nav class="nav">
  <div class="nav-container">
  <a href="/">
    <h2 class="nav-title ">Vignesh Ragupathy</h2>
  </a>
  <input class="menu-btn" type="checkbox" id="menu-btn" />
  <label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
  <ul class="menu">
    <li><a href="/about-me">About</a></li>
    <li><a href="/search">Search</a></li>
  </ul>
</div>
</div>
</nav>

  <script>
    var prevScrollpos = window.pageYOffset;
    window.onscroll = function() {
    var currentScrollPos = window.pageYOffset;
      if (prevScrollpos > currentScrollPos) {
        document.getElementById("navbar").style.top = "0";
      } else {
        document.getElementById("navbar").style.top = "-100px";
      }
      prevScrollpos = currentScrollPos;
    }
    </script>

    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        Vignesh Ragupathy
    

    
          <br>
      <span>on&nbsp;</span><time datetime="2017-10-07 11:35:00 +0000">October 07, 2017</time>
    
  </div>
  <div style="text-align: center;">
    <span>[
      
        
        <!--<a href="/tag/linux"><code class="highligher-rouge"><nobr>linux</nobr></code>&nbsp;</a>-->
        <a href="/tag/linux"><mark style="border-radius: .25em;   padding:.2em .6em .3em;font-size: 75%;"><nobr>linux</nobr></mark>&nbsp;</a>
      
        
        <!--<a href="/tag/opensource"><code class="highligher-rouge"><nobr>opensource</nobr></code>&nbsp;</a>-->
        <a href="/tag/opensource"><mark style="border-radius: .25em;   padding:.2em .6em .3em;font-size: 75%;"><nobr>opensource</nobr></mark>&nbsp;</a>
      
    ]</span> 
  </div>
  
  <h1 class="post-title">Network teaming – RHEL7</h1>
  <div class="post-line"></div>


  <h3 id="introduction">Introduction</h3>

<h4 id="linux-bonding-driver">Linux Bonding driver</h4>

<p>The Linux bonding driver provides a method for aggregating multiple network interface controllers (NICs) into a single logical bonded interface of two or more so-called (NIC) slaves. The majority of modern Linux distributions (distros) come with a Linux kernel which has the Linux bonding driver (bonding)integrated as a loadable kernel module.</p>

<p>We can check the bonding module by</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@example.com ~]#</span><span class="w"> </span>lsmod |grep bonding
<span class="go">bonding 142537 0</span></code></pre></figure>

<h4 id="linux-teaming-driver">Linux Teaming driver</h4>

<p>The Linux Team driver provides an alternative to bonding driver. it has actually been designed to solve the same problem(s) using a wholly different design and different approach; an approach where special attention was paid to flexibility and efficiency. The best part is that the configuration, management, and monitoring of team driver is significantly improved with no compromise on performance, features, or throughput.The main difference is that Team driver kernel part contains only essential code and the rest of the code (link validation, LACP implementation, decision making, etc.) is run in userspace as a part of teamd daemon.</p>

<p>Features comparison between Bonding and Teaming<br />
source – redhat.com</p>

<h4 id="feature-bonding-team">Feature Bonding Team</h4>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">broadcast TX policy	Yes	Yes
round-robin TX policy	Yes	Yes
active-backup TX policy	Yes	Yes
LACP (802.3ad) support	Yes	Yes
hash-based TX policy	Yes	Yes
TX load-balancing support (TLB)	Yes	Yes
VLAN support	Yes	Yes
LACP hash port select	Yes	Yes
Ethtool link monitoring	Yes	Yes
ARP link monitoring	Yes	Yes
ports up/down delays	Yes	Yes
configurable via Network Manager (gui, tui, and cli)	Yes	Yes
multiple device stacking	Yes	Yes
highly customizable hash function setup	No	Yes
D-Bus interface	No	Yes
ØMQ interface	No	Yes
port priorities and stickiness (“primary” option enhancement)	No	Yes
separate per-port link monitoring setup	No	Yes
logic in user-space	No	Yes
modular design	No	Yes
NS/NA (IPV6) link monitoring	No	Yes
load-balancing for LACP support	No	Yes
lockless TX/RX path	No	Yes
user-space runtime control	Limited	Full
multiple link monitoring setup	Limited	Yes
extensibility	Hard	Easy
performance overhead	Low	Very Low
RX load-balancing support (ALB)	Yes	Planned
RX load-balancing support (ALB) in bridge or OVS	No	Planned
Performance Analysis between Bonding and Teaming</span></code></pre></figure>

<p>source – redhat.com</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">Machine type: 3.3Ghz CPU (Intel), 4GB RAM
Link Type: 10GFO
Interface	Performance with64byte packets	Performance with 1KB packets	Performance with 64KB packets	Average Latency
eth0	1664.00Mb/s (27.48%CPU)	8053.53Mb/s (30.71%CPU)	9414.99Mb/s (17.08%CPU)	54.7usec
eth1	1577.44Mb/s (26.91%CPU)	7728.04Mb/s (32.23%CPU)	9329.05Mb/s (19.38%CPU)	49.3usec
bonded (eth0+eth1)	1510.13Mb/s (27.65%CPU)	7277.48Mb/s (30.07%CPU)	9414.97Mb/s (15.62%CPU)	55.5usec
teamed (eth0+eth1)	1550.15Mb/s (26.81%CPU)	7435.76Mb/s (29.56%CPU)	9413.8Mb/s (17.63%CPU)	55.5usec</span></code></pre></figure>

<h3 id="migration">Migration</h3>

<p>We can migrate the existing bond interface to a team interface.<br />
Bond2team is a cli tool used to convert an existing bond interface to team.<br />
To convert a current bond0 configuration to team ifcfg, issue a command as root:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>/usr/bin/bond2team –master bond0 –rename team0</code></pre></figure>

<p>To convert a current bond0 configuration to team ifcfg, and to manually specify the path to the ifcfg file, issue a command as root:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>/usr/bin/bond2team –master bond0 –configdir /path/to/ifcfg-file</code></pre></figure>

<p>It is also possible to create a team configuration by supplying the bond2team tool with a list of bonding parameters. For example:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>/usr/bin/bond2team –bonding_opts “mode<span class="o">=</span>1 <span class="nv">miimon</span><span class="o">=</span>500”</code></pre></figure>

<h3 id="configuration--modeactive-backup">Configuration – Mode:active-backup</h3>

<p>Step 1:<br />
Check the available network device status</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli device status
<span class="go">DEVICE TYPE STATE CONNECTION
eth0 ethernet connected System eth0
eno1 ethernet disconnected —
eno2 ethernet disconnected —
lo loopback unmanaged —</span></code></pre></figure>

<p>Check the network connection status</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
System eth0 5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03 802-3-ethernet eth0</span></code></pre></figure>

<p>Step 2:<br />
Creating a team interface named team0 in active-backup mode</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection add con-name team0 <span class="nb">type </span>team ifname team0 config ‘<span class="o">{</span>“runner”: <span class="o">{</span>“name”: “activebackup”<span class="o">}}</span>’
<span class="go">Connection ‘team0’ (c30dca42-cc35-4578-95c6-ae79f33b5db3) successfully added.</span></code></pre></figure>

<p>Verify the new team connection is created</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
team0 c30dca42-cc35-4578-95c6-ae79f33b5db3 team team0
System eth0 5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03 802-3-ethernet eth0</span></code></pre></figure>

<p>Step 3:<br />
Add the slave interface (eno1 and en02) and point the master to the newly created team interface team0</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection add con-name team0-sl1 <span class="nb">type </span>team-slave ifname eno1 master team0
<span class="go">Connection ‘team0-sl1’ (8d5be820-2e88-46a2-8c08-b34ec0caf8a0) successfully added.</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection add con-name team0-sl2 <span class="nb">type </span>team-slave ifname eno2 master team0
<span class="go">Connection ‘team0-sl2’ (3372f52c-0164-49d5-9783-938df99f18bc) successfully added.</span></code></pre></figure>

<p>Verify the connection status now . we can see team masters and slaves here</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
team0 c30dca42-cc35-4578-95c6-ae79f33b5db3 team team0
System eth0 5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03 802-3-ethernet eth0
team0-sl2 3372f52c-0164-49d5-9783-938df99f18bc 802-3-ethernet eno2
team0-sl1 8d5be820-2e88-46a2-8c08-b34ec0caf8a0 802-3-ethernet eno1</span></code></pre></figure>

<p>Step 4:<br />
Now assign the IP address to the team0 interface</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection modify team0 ipv4.addresses 192.168.20.100/24 ipv4.method manual</code></pre></figure>

<p>Check the teaming status. Here we can see team0 interface status and active slave</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>teamdctl team0 state
<span class="go">setup:
runner: activebackup
ports:
eno1
link watches:
link summary: up
instance[link_watch_0]:
name: ethtool
link: up
eno2
link watches:
link summary: up
instance[link_watch_0]:
name: ethtool
link: up
runner:
active port: eno1</span></code></pre></figure>

<p>Step 5:<br />
Checking the redundancy</p>

<p>Now bring down the current active slave interface and check the other interface becomes active</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection down team0-sl
<span class="go">team0-sl1 team0-sl2</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>nmcli connection down team0-sl1</code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@HOST1 ~]#</span><span class="w"> </span>teamdctl team0 state
<span class="go">setup:
runner: activebackup
ports:
eno2
link watches:
link summary: up
instance[link_watch_0]:
name: ethtool
link: up
runner:
active port: eno2</span></code></pre></figure>

<p>Now we can see the active port is changed to eno2 automatically.</p>

<h2 id="configuration--moderound-robin">Configuration – Mode:round-robin</h2>

<p>Step 1:<br />
Check the network interfaces available</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>ifconfig |grep eno <span class="nt">-A</span> 2
<span class="go">eno16777728: flags=4163 mtu 1500
inet 10.0.0.21 netmask 255.255.255.0 broadcast 10.0.0.255

eno33554976: flags=4163 mtu 1500
ether 00:0c:29:9e:6f:a9 txqueuelen 1000 (Ethernet)

eno50332200: flags=4163 mtu 1500
ether 00:0c:29:9e:6f:b3 txqueuelen 1000 (Ethernet)</span></code></pre></figure>

<p>Step 2:<br />
Create a teaming interface with config roundrobin</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection add con-name team1 <span class="nb">type </span>team ifname team1 config ‘<span class="o">{</span>“runner”: <span class="o">{</span>“name”: “roundrobin”<span class="o">}}</span>’
<span class="go">Connection ‘team1’ (ef3bc4dc-c060-4d39-865a-6c6df65d6c3d) successfully added.</span></code></pre></figure>

<p>Step 3:<br />
Create a slave interface and point the master to team1</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection add con-name slave1 <span class="nb">type </span>team-slave ifname eno33554976 master team1
<span class="go">Connection ‘slave1’ (f77e9f45-43fe-438d-9b91-9e2397b15272) successfully added. </span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection add con-name slave2 <span class="nb">type </span>team-slave ifname eno50332200 master team1
<span class="go">Connection ‘slave2’ (4559604b-ffd4-4513-a3a9-b9c94ceb5108) successfully added.</span></code></pre></figure>

<p>Step 4:<br />
Assign IP to team1 interface</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection modify team1 ipv4.addresses 10.0.0.23/24 ipv4.method manual</code></pre></figure>

<p>Step 5:<br />
Check the connecton status</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
slave1 f77e9f45-43fe-438d-9b91-9e2397b15272 802-3-ethernet eno33554976
team1 ef3bc4dc-c060-4d39-865a-6c6df65d6c3d team team1
eno16777728 c0cbd7c2-b6cc-473d-919f-4a291fc72cd4 802-3-ethernet eno16777728
slave2 4559604b-ffd4-4513-a3a9-b9c94ceb5108 802-3-ethernet eno50332200</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>teamdctl team1 state
<span class="go">setup:
runner: roundrobin
ports:
eno50332200
link watches:
link summary: up
instance[link_watch_0]:
name: ethtool
link: up
eno33554976
link watches:
link summary: up
instance[link_watch_0]:
name: ethtool
link: up</span></code></pre></figure>

<h2 id="bandwidth-analysis-between-individual-nic-and-teaming-nic-moderound-robin">Bandwidth analysis between individual NIC and teaming NIC (mode=round-robin)</h2>

<p>I Used another VM(node2) with identical configuraton and followed the same steps and assined the IP 10.0.0.24 to team1 interface.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>nmcli connection modify team1 ipv4.addresses 10.0.0.24/24 ipv4.method manual</code></pre></figure>

<p>Step 1:<br />
Installing qperf packege in both the node</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@nodeX]#</span><span class="w"> </span>rpm <span class="nt">-ivh</span> qperf-0.4.9-2.el7.x86_64.rpm
<span class="go">warning: qperf-0.4.9-2.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY
</span><span class="gp">Preparing… #</span><span class="c">################################ [100%]</span>
<span class="go">Updating / installing…
</span><span class="gp">1:qperf-0.4.9-2.el7 #</span><span class="c">################################ [100%]</span></code></pre></figure>

<p>Step 2:<br />
Flush the iptables in both the nodes</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@nodeX ~]#</span><span class="w"> </span>iptables <span class="nt">-F</span></code></pre></figure>

<p>Step 3:<br />
Now bringing down the teaming interface from both the nodes to check the bandwith by keeping only individual NIC</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection down team1</code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
slave2 4559604b-ffd4-4513-a3a9-b9c94ceb5108 802-3-ethernet —
eno16777728 c0cbd7c2-b6cc-473d-919f-4a291fc72cd4 802-3-ethernet eno16777728
team1 ef3bc4dc-c060-4d39-865a-6c6df65d6c3d team —
slave1 f77e9f45-43fe-438d-9b91-9e2397b15272 802-3-ethernet —</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>nmcli connection down team1</code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
slave1 3d2ae74e-00b5-42d9-b531-d2950190f9de 802-3-ethernet —
team1 18b13233-eb4b-4468-8bc9-e8d8263a404b team —
eno16777728 42910ac3-a701-4f5e-b416-59c61ce1eb11 802-3-ethernet eno16777728
slave2 72061aa5-dac5-4376-b6df-34c0e5620b2e 802-3-ethernet —</span></code></pre></figure>

<p>Step 4:<br />
Now starting qperf in node2</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>qperf</code></pre></figure>

<p>Step 5:<br />
Now running qperf for 5 minutes to check the tcp and udp bandwidth between node 1 and node 2 .<br />
The IP 10.0.0.22 is assined to NIC eno16777728 of node2</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>qperf 10.0.0.22 <span class="nt">-t</span> 300 tcp_bw udp_bw
<span class="go">tcp_bw:
bw = 105 MB/sec
udp_bw:
send_bw = 55.9 MB/sec
recv_bw = 55.2 MB/sec</span></code></pre></figure>

<p>Step 6:<br />
Now bandwidth of individual NIC is tested, lets bring up team interface and bring down individual NIC</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection down eno16777728</code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
slave2 4559604b-ffd4-4513-a3a9-b9c94ceb5108 802-3-ethernet eno50332200
eno16777728 c0cbd7c2-b6cc-473d-919f-4a291fc72cd4 802-3-ethernet —
team1 ef3bc4dc-c060-4d39-865a-6c6df65d6c3d team team1
slave1 f77e9f45-43fe-438d-9b91-9e2397b15272 802-3-ethernet eno33554976</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>nmcli connection down eno16777728</code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>nmcli connection show
<span class="go">NAME UUID TYPE DEVICE
slave1 3d2ae74e-00b5-42d9-b531-d2950190f9de 802-3-ethernet eno33554976
team1 18b13233-eb4b-4468-8bc9-e8d8263a404b team team1
eno16777728 42910ac3-a701-4f5e-b416-59c61ce1eb11 802-3-ethernet —
slave2 72061aa5-dac5-4376-b6df-34c0e5620b2e 802-3-ethernet eno50332200</span></code></pre></figure>

<p>Step 7:<br />
Starting qperf on node2</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node2 ~]#</span><span class="w"> </span>qperf</code></pre></figure>

<p>Step 8:<br />
Now running qperf for 5 minutes to check the tcp and udp bandwidth between node 1 and node 2 .<br />
The IP 10.0.0.24 is assined to team1 interface of node2</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">[root@node1 ~]#</span><span class="w"> </span>qperf 10.0.0.24 <span class="nt">-t</span> 300 tcp_bw udp_bw
<span class="go">tcp_bw:
bw = 108 MB/sec
udp_bw:
send_bw = 51.5 MB/sec
recv_bw = 51 MB/sec</span></code></pre></figure>

<p>Now we can see the bandwith between individual NIC and team interface is almost same.</p>


</div>


<style>
    #share-buttons {
        display: inline-block;
        vertical-align: middle;
    }

    #share-buttons:after {
        content: "";
        display: block;
        clear: both;
    }

    #share-buttons>div {
        position: relative;
        text-align: left;
        height: 36px;
        width: 32px;
        float: left;
        text-align: center;
    }

    #share-buttons>div>svg {
        height: 16px;
        fill: #d5d5d5;
        margin-top: 10px;
    }

    #share-buttons>div:hover {
        cursor: pointer;
    }

    #share-buttons>div.facebook:hover>svg {
        fill: #3B5998;
    }

    #share-buttons>div.twitter:hover>svg {
        fill: #55ACEE;
    }

    #share-buttons>div.linkedin:hover>svg {
        fill: #0077b5;
    }

    #share-buttons>div.pinterest:hover>svg {
        fill: #CB2027;
    }

    #share-buttons>div.gplus:hover>svg {
        fill: #dd4b39;
    }

    #share-buttons>div.mail:hover>svg {
        fill: #7D7D7D;
    }

    #share-buttons>div.instagram:hover>svg {
        fill: #C73B92;
    }

    #share-buttons>div.facebook>svg {
        height: 18px;
        margin-top: 9px;
    }

    #share-buttons>div.twitter>svg {
        height: 20px;
        margin-top: 8px;
    }

    #share-buttons>div.linkedin>svg {
        height: 19px;
        margin-top: 7px;
    }

    #share-buttons>div.pinterest>svg {
        height: 20px;
        margin-top: 9px;
    }

    #share-buttons>div.gplus>svg {
        height: 17px;
        margin-top: 9px;
        position: relative;
        left: 1px;
    }

    #share-buttons>div.mail>svg {
        height: 14px;
        margin-top: 11px;
    }
</style>

<span style="color: #353535;">Share on: </span>
<div id="share-buttons">
    
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://0.0.0.0:4000/network-teaming-rhel7/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <!--<div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://0.0.0.0:4000/network-teaming-rhel7/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>-->
    <div class="twitter" title="Share this on Twitter" onclick="window.open('https://twitter.com/intent/tweet?text=Network teaming – RHEL7&url=http://0.0.0.0:4000/network-teaming-rhel7/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://0.0.0.0:4000/network-teaming-rhel7/&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    <!--
    
    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://0.0.0.0:4000/network-teaming-rhel7/');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://0.0.0.0:4000/network-teaming-rhel7/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
    -->
    

</div>
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	/* #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;} */
    #mc_embed_signup{clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://vikki.us10.list-manage.com/subscribe/post?u=95b2d364576fdf5e25e704170&amp;id=905f0eae6d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<label for="mce-EMAIL">Subscribe to Vikki's blog</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_95b2d364576fdf5e25e704170_905f0eae6d" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->


  <!-- Start disqus -->
<script src="/assets/js/disqusLoader.js" /></script>
<div id="disqus_thread"><h3>Discussion and feedback</h3></div>
<div class="disqus"></div>
<script>
    disqusLoader('.disqus', {
        scriptUrl: 'https://vikkiblog.disqus.com/embed.js'
    });
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!-- End disqus -->


<div class="pagination">
  
    <a href="/bike-trip-to-goa/" class="left arrow">&#8592;</a>
  
  
    <a href="/beautiful-budapest/" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>
    </main>

    <!--<footer >
  <span>
        &copy; <time datetime="2025-07-31 10:44:18 +0000">2025</time> . Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>-->

<footer class="footer">
    <div class="footer--section">
        <!--
      
      <a href=https://twitter.com/vikkiintweet> <svg viewBox="0 0 64 64" class="footer--icon">
           <path data-name="layer1"
  d="M64 13.194a23.1 23.1 0 0 1-7.3 2.1 14.119 14.119 0 0 0 5.5-7.2c-1.9 1.2-6.1 2.9-8.2 2.9a13.782 13.782 0 0 0-9.6-4 13.187 13.187 0 0 0-13.2 13.2 13.576 13.576 0 0 0 .3 2.9c-9.9-.3-21.5-5.2-28-13.7a13.206 13.206 0 0 0 4 17.4c-1.5.2-4.4-.1-5.7-1.4-.1 4.6 2.1 10.7 10.2 12.9-1.6.8-4.3.6-5.5.4.4 3.9 5.9 9 11.8 9-2.1 2.4-9.3 6.9-18.3 5.5a39.825 39.825 0 0 0 20.7 5.8 36.8 36.8 0 0 0 37-38.6v-.5a22.861 22.861 0 0 0 6.3-6.7z"
  fill="#4f80ff"></path>
          </svg>
      </a>
  </div>
  <div class="footer--section">
      
      <a href=https://github.com/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
          xmlns="http://www.w3.org/2000/svg">
          <path data-name="layer2"
  d="M32 0a32.021 32.021 0 0 0-10.1 62.4c1.6.3 2.2-.7 2.2-1.5v-6c-8.9 1.9-10.8-3.8-10.8-3.8-1.5-3.7-3.6-4.7-3.6-4.7-2.9-2 .2-1.9.2-1.9 3.2.2 4.9 3.3 4.9 3.3 2.9 4.9 7.5 3.5 9.3 2.7a6.93 6.93 0 0 1 2-4.3c-7.1-.8-14.6-3.6-14.6-15.8a12.27 12.27 0 0 1 3.3-8.6 11.965 11.965 0 0 1 .3-8.5s2.7-.9 8.8 3.3a30.873 30.873 0 0 1 8-1.1 30.292 30.292 0 0 1 8 1.1c6.1-4.1 8.8-3.3 8.8-3.3a11.965 11.965 0 0 1 .3 8.5 12.1 12.1 0 0 1 3.3 8.6c0 12.3-7.5 15-14.6 15.8a7.746 7.746 0 0 1 2.2 5.9v8.8c0 .9.6 1.8 2.2 1.5A32.021 32.021 0 0 0 32 0z"
  fill="#2d2d2d"></path>
  <path data-name="layer1" d="M12.1 45.9c-.1.2-.3.2-.5.1s-.4-.3-.3-.5.3-.2.6-.1c.2.2.3.4.2.5zm1.3 1.5a.589.589 0 0 1-.8-.8.631.631 0 0 1 .7.1.494.494 0 0 1 .1.7zm1.3 1.8a.585.585 0 0 1-.7-.3.6.6 0 0 1 0-.8.585.585 0 0 1 .7.3c.2.3.2.7 0 .8zm1.7 1.8c-.2.2-.5.1-.8-.1-.3-.3-.4-.6-.2-.8a.619.619 0 0 1 .8.1.554.554 0 0 1 .2.8zm2.4 1c-.1.3-.4.4-.8.3s-.6-.4-.5-.7.4-.4.8-.3c.3.2.6.5.5.7zm2.6.2c0 .3-.3.5-.7.5s-.7-.2-.7-.5.3-.5.7-.5c.4.1.7.3.7.5zm2.4-.4q0 .45-.6.6a.691.691 0 0 1-.8-.3q0-.45.6-.6c.5-.1.8.1.8.3z"></path>
          </svg>
      </a>
  </div>
  <div class="footer--section">
      
      <a href=https://www.youtube.com/c/vigneshragupathy> <svg class="footer--icon"
          viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
          <path data-name="layer1"
  d="M50.708 9H13.292A13.25 13.25 0 0 0 0 22.207v18.586A13.25 13.25 0 0 0 13.292 54h37.416A13.25 13.25 0 0 0 64 40.793V22.207A13.25 13.25 0 0 0 50.708 9zm-8.989 23.4l-17.501 8.3a.7.7 0 0 1-1.005-.63V22.962a.7.7 0 0 1 1.02-.623l17.5 8.812a.7.7 0 0 1-.015 1.253zm0 0"
  fill="#f61c0d"></path>
          </svg>
      </a>
  </div>

  <div class="footer--section">
    
    <a href=https://www.linkedin.com/in/vigneshragupathy> <svg class="footer--icon"
        viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <path data-name="layer1"
  fill="#0077b7" d="M1.15 21.7h13V61h-13zm46.55-1.3c-5.7 0-9.1 2.1-12.7 6.7v-5.4H22V61h13.1V39.7c0-4.5 2.3-8.9 7.5-8.9s8.3 4.4 8.3 8.8V61H64V38.7c0-15.5-10.5-18.3-16.3-18.3zM7.7 2.6C3.4 2.6 0 5.7 0 9.5s3.4 6.9 7.7 6.9 7.7-3.1 7.7-6.9S12 2.6 7.7 2.6z"></path>
        </svg>
          </a>
</div>
  <div class="footer--section">
      
      <a href="http://0.0.0.0:4000/feed.xml">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
              y="0px" viewBox="0 0 64 64" class="footer--icon" xml:space="preserve">
              <path data-name="layer1"
  d="M8.6 46.746a8.627 8.627 0 1 0 8.6 8.627 8.678 8.678 0 0 0-8.6-8.627zM.7 21.567H.2V33.5h.5a29.836 29.836 0 0 1 29.8 29.8v.7h11.9v-.7A41.719 41.719 0 0 0 .7 21.567z"
  fill="#ff8900"></path>
  <path data-name="layer1" d="M.7 0H.2v11.937h.5A51.4 51.4 0 0 1 52 63.3v.7h12v-.7A63.369 63.369 0 0 0 .7 0z"
  fill="#ff8900"></path>
          </svg>
      </a>
      -->
        
        <a href=https://twitter.com/vikkiintweet> <svg viewBox="0 0 64 64" class="footer--icon">
            <path data-name="layer1"
                d="M64 13.194a23.1 23.1 0 0 1-7.3 2.1 14.119 14.119 0 0 0 5.5-7.2c-1.9 1.2-6.1 2.9-8.2 2.9a13.782 13.782 0 0 0-9.6-4 13.187 13.187 0 0 0-13.2 13.2 13.576 13.576 0 0 0 .3 2.9c-9.9-.3-21.5-5.2-28-13.7a13.206 13.206 0 0 0 4 17.4c-1.5.2-4.4-.1-5.7-1.4-.1 4.6 2.1 10.7 10.2 12.9-1.6.8-4.3.6-5.5.4.4 3.9 5.9 9 11.8 9-2.1 2.4-9.3 6.9-18.3 5.5a39.825 39.825 0 0 0 20.7 5.8 36.8 36.8 0 0 0 37-38.6v-.5a22.861 22.861 0 0 0 6.3-6.7z"
                fill="#202020"></path>
            </svg>
        </a>
    </div>
    <div class="footer--section">
        
        <a href=https://github.com/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg">
            <path data-name="layer2"
                d="M32 0a32.021 32.021 0 0 0-10.1 62.4c1.6.3 2.2-.7 2.2-1.5v-6c-8.9 1.9-10.8-3.8-10.8-3.8-1.5-3.7-3.6-4.7-3.6-4.7-2.9-2 .2-1.9.2-1.9 3.2.2 4.9 3.3 4.9 3.3 2.9 4.9 7.5 3.5 9.3 2.7a6.93 6.93 0 0 1 2-4.3c-7.1-.8-14.6-3.6-14.6-15.8a12.27 12.27 0 0 1 3.3-8.6 11.965 11.965 0 0 1 .3-8.5s2.7-.9 8.8 3.3a30.873 30.873 0 0 1 8-1.1 30.292 30.292 0 0 1 8 1.1c6.1-4.1 8.8-3.3 8.8-3.3a11.965 11.965 0 0 1 .3 8.5 12.1 12.1 0 0 1 3.3 8.6c0 12.3-7.5 15-14.6 15.8a7.746 7.746 0 0 1 2.2 5.9v8.8c0 .9.6 1.8 2.2 1.5A32.021 32.021 0 0 0 32 0z"
                fill="#202020"></path>
            <path data-name="layer1"
                d="M12.1 45.9c-.1.2-.3.2-.5.1s-.4-.3-.3-.5.3-.2.6-.1c.2.2.3.4.2.5zm1.3 1.5a.589.589 0 0 1-.8-.8.631.631 0 0 1 .7.1.494.494 0 0 1 .1.7zm1.3 1.8a.585.585 0 0 1-.7-.3.6.6 0 0 1 0-.8.585.585 0 0 1 .7.3c.2.3.2.7 0 .8zm1.7 1.8c-.2.2-.5.1-.8-.1-.3-.3-.4-.6-.2-.8a.619.619 0 0 1 .8.1.554.554 0 0 1 .2.8zm2.4 1c-.1.3-.4.4-.8.3s-.6-.4-.5-.7.4-.4.8-.3c.3.2.6.5.5.7zm2.6.2c0 .3-.3.5-.7.5s-.7-.2-.7-.5.3-.5.7-.5c.4.1.7.3.7.5zm2.4-.4q0 .45-.6.6a.691.691 0 0 1-.8-.3q0-.45.6-.6c.5-.1.8.1.8.3z">
            </path>
            </svg>
        </a>
    </div>
    <div class="footer--section">
        
        <a href=https://www.youtube.com/c/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg">
            <path data-name="layer1"
                d="M50.708 9H13.292A13.25 13.25 0 0 0 0 22.207v18.586A13.25 13.25 0 0 0 13.292 54h37.416A13.25 13.25 0 0 0 64 40.793V22.207A13.25 13.25 0 0 0 50.708 9zm-8.989 23.4l-17.501 8.3a.7.7 0 0 1-1.005-.63V22.962a.7.7 0 0 1 1.02-.623l17.5 8.812a.7.7 0 0 1-.015 1.253zm0 0"
                fill="#202020"></path>
            </svg>
        </a>
    </div>

    <div class="footer--section">
        
        <a href=https://www.linkedin.com/in/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg">
            <path data-name="layer1" fill="#202020"
                d="M1.15 21.7h13V61h-13zm46.55-1.3c-5.7 0-9.1 2.1-12.7 6.7v-5.4H22V61h13.1V39.7c0-4.5 2.3-8.9 7.5-8.9s8.3 4.4 8.3 8.8V61H64V38.7c0-15.5-10.5-18.3-16.3-18.3zM7.7 2.6C3.4 2.6 0 5.7 0 9.5s3.4 6.9 7.7 6.9 7.7-3.1 7.7-6.9S12 2.6 7.7 2.6z">
            </path>
            </svg>
        </a>
    </div>
    <div class="footer--section">
        
        <a href="http://0.0.0.0:4000/feed.xml">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                y="0px" viewBox="0 0 64 64" class="footer--icon" xml:space="preserve">
                <path data-name="layer1"
                    d="M8.6 46.746a8.627 8.627 0 1 0 8.6 8.627 8.678 8.678 0 0 0-8.6-8.627zM.7 21.567H.2V33.5h.5a29.836 29.836 0 0 1 29.8 29.8v.7h11.9v-.7A41.719 41.719 0 0 0 .7 21.567z"
                    fill="#202020"></path>
                <path data-name="layer1"
                    d="M.7 0H.2v11.937h.5A51.4 51.4 0 0 1 52 63.3v.7h12v-.7A63.369 63.369 0 0 0 .7 0z" fill="#202020">
                </path>
            </svg>
        </a>
    </div>
</footer>
  </body>
</html>
