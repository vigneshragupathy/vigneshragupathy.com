<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Kubernetes stateful set with local-storage persistent volume | Vignesh Ragupathy</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Kubernetes stateful set with local-storage persistent volume" />
<meta name="author" content="Vignesh Ragupathy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="StatefulSets are similar to deployment contains identical container spec but ensures an order of the deployment. StatefulSets deploy pods in a sequential orders. Each pod as its own identity and is named with a unique ID. In the below post we are going to create a statefulsets and watch the behaviour during deletion of pod, scaling of pod and during update of container image." />
<meta property="og:description" content="StatefulSets are similar to deployment contains identical container spec but ensures an order of the deployment. StatefulSets deploy pods in a sequential orders. Each pod as its own identity and is named with a unique ID. In the below post we are going to create a statefulsets and watch the behaviour during deletion of pod, scaling of pod and during update of container image." />
<link rel="canonical" href="http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/" />
<meta property="og:url" content="http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/" />
<meta property="og:site_name" content="Vignesh Ragupathy" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-11-24T08:03:14+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Kubernetes stateful set with local-storage persistent volume" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Vignesh Ragupathy"},"@type":"BlogPosting","description":"StatefulSets are similar to deployment contains identical container spec but ensures an order of the deployment. StatefulSets deploy pods in a sequential orders. Each pod as its own identity and is named with a unique ID. In the below post we are going to create a statefulsets and watch the behaviour during deletion of pod, scaling of pod and during update of container image.","headline":"Kubernetes stateful set with local-storage persistent volume","url":"http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/","datePublished":"2019-11-24T08:03:14+00:00","dateModified":"2019-11-24T08:03:14+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <link href="/css/github.css" rel="stylesheet">


  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/content/images/favicon/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/content/images/favicon/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/content/images/favicon/touch-icon-iphone.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Vignesh Ragupathy" />

  <!-- Google Analytics-->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YL89JLMQRY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YL89JLMQRY');
</script>
  
  
  





  

  <!-- Twitter cards -->
<meta name="twitter:site"    content="@vikkiintweet">
<meta name="twitter:creator" content="@Vignesh Ragupathy">
<meta name="twitter:title"   content="Kubernetes stateful set with local-storage persistent volume">


<meta name="twitter:description" content="Vignesh Ragupathy's blog">



<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="">

<!-- end of Twitter cards -->
</head>


  <body>

    <!--
<nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">Vignesh Ragupathy</h2>
    </a>
    <ul>
      <li><a href="/tools">Tools developed</a></li>
      <li><a href="/videos">Videos</a></li>
      <li><a href="/about-me">About me</a></li>
    </ul>
  </div>
</nav>
-->

<div id="navbar">
  <nav class="nav">
  <div class="nav-container">
  <a href="/">
    <h2 class="nav-title ">Vignesh Ragupathy</h2>
  </a>
  <input class="menu-btn" type="checkbox" id="menu-btn" />
  <label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
  <ul class="menu">
    <li><a href="/about-me">About</a></li>
    <li><a href="/search">Search</a></li>
  </ul>
</div>
</div>
</nav>

  <script>
    var prevScrollpos = window.pageYOffset;
    window.onscroll = function() {
    var currentScrollPos = window.pageYOffset;
      if (prevScrollpos > currentScrollPos) {
        document.getElementById("navbar").style.top = "0";
      } else {
        document.getElementById("navbar").style.top = "-100px";
      }
      prevScrollpos = currentScrollPos;
    }
    </script>

    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        Vignesh Ragupathy
    

    
          <br>
      <span>on&nbsp;</span><time datetime="2019-11-24 08:03:14 +0000">November 24, 2019</time>
    
  </div>
  <div style="text-align: center;">
    <span>[
      
        
        <!--<a href="/tag/kubernetes"><code class="highligher-rouge"><nobr>kubernetes</nobr></code>&nbsp;</a>-->
        <a href="/tag/kubernetes"><mark style="border-radius: .25em;   padding:.2em .6em .3em;font-size: 75%;"><nobr>kubernetes</nobr></mark>&nbsp;</a>
      
        
        <!--<a href="/tag/linux"><code class="highligher-rouge"><nobr>linux</nobr></code>&nbsp;</a>-->
        <a href="/tag/linux"><mark style="border-radius: .25em;   padding:.2em .6em .3em;font-size: 75%;"><nobr>linux</nobr></mark>&nbsp;</a>
      
        
        <!--<a href="/tag/opensource"><code class="highligher-rouge"><nobr>opensource</nobr></code>&nbsp;</a>-->
        <a href="/tag/opensource"><mark style="border-radius: .25em;   padding:.2em .6em .3em;font-size: 75%;"><nobr>opensource</nobr></mark>&nbsp;</a>
      
    ]</span> 
  </div>
  
  <h1 class="post-title">Kubernetes stateful set with local-storage persistent volume</h1>
  <div class="post-line"></div>


  <p>StatefulSets are similar to deployment contains identical container spec but ensures an order of the deployment. StatefulSets deploy pods in a sequential orders. Each pod as its own identity and is named with a unique ID. In the below post we are going to create a statefulsets and watch the behaviour during deletion of pod, scaling of pod and during update of container image.</p>

<p>The StatefulSets consist of a headless service, pods and a volume. We are going to use a local-storage volume for statefulsets. It is also common to dynamically allocate storage using  volumeClaimTemplates, but due to some limitation in virtualbox i am using a manual allocation using PersistVolumeClaim.</p>

<h3 id="setup"><strong>Setup</strong></h3>

<p>I am using the Virtualbox(running in Ubuntu 18.04 physical machine) for this entire setup . The physical machine is Dell inspiron laptop with 12GB RAM , Intel® Core™ i7-6500U CPU @ 2.50GHz × 4 and 512GB SSD hardisk.</p>

<!--kg-card-begin: image-->
<figure class="kg-card kg-image-card"><img src="/content/images/2019/11/setup.jpg" class="kg-image" /></figure>
<!--kg-card-end: image-->
<h5 id="step-1-create-a-persistentvolume-and-persistemvolumeclaim">Step 1: Create a persistentVolume and persistemVolumeClaim</h5>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">vim pv.yaml</span></code></pre></figure>

<!--kg-card-begin: html-->
<script src="https://gist.github.com/vigneshragupathy/b0fdde697229f150740a079b77458d64.js"></script>
<!--kg-card-end: html-->
<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">vim pv_claim.yaml</span></code></pre></figure>
<!--kg-card-begin: html-->
<script src="https://gist.github.com/vigneshragupathy/5f9f6acb132e499ccb80523b170dc815.js"></script>
<!--kg-card-end: html-->
<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl create <span class="nt">-f</span> pv.yaml 
<span class="go">persistentvolume/vikki-pv-volume created

</span><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl create <span class="nt">-f</span> pv_claim.yaml 
<span class="go">persistentvolumeclaim/vikki-pv-volume-claim created</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pvc
<span class="go">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
vikki-pv-volume-claim Bound vikki-pv-volume 1Gi RWO local-storage 4s

</span><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pv
<span class="go">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
vikki-pv-volume 1Gi RWO Retain Bound default/vikki-pv-volume-claim local-storage 9s</span></code></pre></figure>

<h5 id="step-2-create-a-statefulsets">Step 2: Create a statefulSets</h5>

<p>Create a statefulSets and map the PVC created in previous steps. The statefull set consist of the following. -</p>

<ul>
  <li>Headless service</li>
  <li>StatefulSets with container details</li>
  <li>Persistent Volumes</li>
</ul>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">vim ss.yaml</span></code></pre></figure>
<!--kg-card-begin: html-->
<script src="https://gist.github.com/vigneshragupathy/d04c1473a6dacc90fcc8af2946b54b92.js"></script>
<!--kg-card-end: html-->
<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl create <span class="nt">-f</span> ss.yaml 
<span class="go">service/nginx created
statefulset.apps/web created</span></code></pre></figure>

<h5 id="step-3-verify-statefulsets">Step 3: Verify statefulSets</h5>

<p>Now we can see the statefulsets are created and the respecive pod is created with a sequential unique id.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get statefulsets.apps 
<span class="go">NAME READY AGE
web 2/2 6m40s

</span><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pod <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
<span class="go">NAME READY STATUS RESTARTS AGE
web-0 1/1 Running 0 15m
web-1 1/1 Running 0 15m</span></code></pre></figure>

<h5 id="step-4-verify-the-dns-for-statefulsets">Step 4: Verify the DNS for statefulSets</h5>

<p>Create a temporary busybox pod and test the dns resolution for each statefulSet pods based on the pod and stateful set name.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl apply <span class="nt">-f</span> https://k8s.io/examples/admin/dns/busybox.yaml
<span class="go">pod/busybox created</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">root@kubernetes2:~#</span><span class="w"> </span>docker ps <span class="nt">-a</span> |grep busybox
<span class="go">8e3ba8c16f3e busybox "sleep 3600" 21 seconds ago Up 20 seconds k8s_busybox_busybox_default_454e3e1c-1b41-4f6e-a244-6d89cd8c8379_0
9c890ad85c23 k8s.gcr.io/pause:3.1 "/pause" 28 seconds ago Up 27 seconds k8s_POD_busybox_default_454e3e1c-1b41-4f6e-a244-6d89cd8c8379_0

</span><span class="gp">root@kubernetes2:~#</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> k8s_busybox_busybox_default_454e3e1c-1b41-4f6e-a244-6d89cd8c8379_0 /bin/sh
<span class="gp">/ #</span><span class="w"> 
</span><span class="gp">/ #</span><span class="w"> </span>ping web-0
<span class="go">ping: bad address 'web-0'
</span><span class="gp">/ #</span><span class="w"> </span>ping web-0.nginx
<span class="go">PING web-0.nginx (192.168.249.183): 56 data bytes
64 bytes from 192.168.249.183: seq=0 ttl=63 time=0.551 ms
64 bytes from 192.168.249.183: seq=1 ttl=63 time=0.071 ms
^C
--- web-0.nginx ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
round-trip min/avg/max = 0.071/0.311/0.551 ms

</span><span class="gp">/ #</span><span class="w"> </span>ping web-1.nginx
<span class="go">PING web-1.nginx (192.168.249.184): 56 data bytes
64 bytes from 192.168.249.184: seq=0 ttl=63 time=0.227 ms
64 bytes from 192.168.249.184: seq=1 ttl=63 time=0.256 ms
^C
--- web-1.nginx ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
round-trip min/avg/max = 0.227/0.241/0.256 ms
</span><span class="gp">/ #</span><span class="w"> </span></code></pre></figure>

<blockquote>
  <p>Now we can see both the statefulSets pods resolves for  dns.</p>
</blockquote>

<h5 id="step-5-verify-the-order-of-pod-creation-on-deletion">Step 5: Verify the order of pod creation on deletion</h5>

<p>We can try deleting some pods and see how the new pods are creating</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl delete pod <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
<span class="go">pod "web-0" deleted
pod "web-1" deleted
</span><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pod <span class="nt">-w</span> <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
<span class="go">NAME READY STATUS RESTARTS AGE
web-0 1/1 Running 0 18m
web-1 1/1 Running 0 18m
web-0 1/1 Terminating 0 19m
web-1 1/1 Terminating 0 19m
web-0 0/1 Terminating 0 19m
web-1 0/1 Terminating 0 19m
web-1 0/1 Terminating 0 19m
web-1 0/1 Terminating 0 19m
web-0 0/1 Terminating 0 19m
web-0 0/1 Terminating 0 19m
web-0 0/1 Pending 0 0s
web-0 0/1 Pending 0 0s
web-0 0/1 ContainerCreating 0 0s
web-0 0/1 ContainerCreating 0 1s
web-0 1/1 Running 0 2s
web-1 0/1 Pending 0 0s
web-1 0/1 Pending 0 0s
web-1 0/1 ContainerCreating 0 0s
web-1 0/1 ContainerCreating 0 1s
web-1 1/1 Running 0 1s
</span><span class="gp">^Cvikki@kubernetes1:~$</span><span class="w"> </span></code></pre></figure>

<blockquote>
  <p>We can see the pod are creating in ascending order preserving the sequence status</p>
</blockquote>

<h5 id="step-6-verify-the-order-of-pod-creation-on-scalling">Step 6: Verify the order of pod creation on scalling</h5>

<p>Now lets scale up and scale down the statefulset and watch the order of pod creation and deletion</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl scale statefulset <span class="nt">--replicas</span><span class="o">=</span>5 web 
<span class="go">statefulset.apps/web scaled</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pod <span class="nt">-w</span> <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
<span class="go">NAME READY STATUS RESTARTS AGE
web-0 1/1 Running 0 5m5s
web-1 1/1 Running 0 5m3s
web-2 0/1 Pending 0 0s
web-2 0/1 Pending 0 0s
web-2 0/1 ContainerCreating 0 0s
web-2 0/1 ContainerCreating 0 1s
web-2 1/1 Running 0 1s
web-3 0/1 Pending 0 0s
web-3 0/1 Pending 0 0s
web-3 0/1 ContainerCreating 0 0s
web-3 0/1 ContainerCreating 0 1s
web-3 1/1 Running 0 1s
web-4 0/1 Pending 0 0s
web-4 0/1 Pending 0 0s
web-4 0/1 ContainerCreating 0 1s
web-4 0/1 ContainerCreating 0 2s
web-4 1/1 Running 0 3s</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl scale statefulset <span class="nt">--replicas</span><span class="o">=</span>3 web 
<span class="go">statefulset.apps/web scaled</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pod <span class="nt">-w</span> <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
<span class="go">NAME READY STATUS RESTARTS AGE
web-0 1/1 Running 0 5m44s
web-1 1/1 Running 0 5m42s
web-2 1/1 Running 0 19s
web-3 1/1 Running 0 18s
web-4 1/1 Running 0 17s
web-4 1/1 Terminating 0 40s
web-4 0/1 Terminating 0 42s
web-4 0/1 Terminating 0 47s
web-4 0/1 Terminating 0 47s
web-3 1/1 Terminating 0 48s
web-3 0/1 Terminating 0 49s
web-3 0/1 Terminating 0 58s
web-3 0/1 Terminating 0 58s</span></code></pre></figure>

<blockquote>
  <p>We can see from the above output the sequential order is preserved</p>
</blockquote>

<h5 id="step-6-verify-the-order-of-pod-creation-on-update">Step 6: Verify the order of pod creation on update</h5>

<p>Now lets update the image in the statefulset and watch for the pod creation and deletion</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get statefulsets.apps web <span class="nt">-o</span> yaml |grep updateStrategy <span class="nt">-A</span> 3
<span class="go">    updateStrategy:
    rollingUpdate:
        partition: 0
    type: RollingUpdate
</span><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span></code></pre></figure>

<blockquote>
  <p>Current statefulsets has the updatestrategy of type “<em>RollingUpdate</em>”</p>
</blockquote>

<p>Lets modify the container image to a different version</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl <span class="nb">set </span>image statefulset web <span class="nv">nginx</span><span class="o">=</span>k8s.gcr.io/nginx-slim:0.9
<span class="go">statefulset.apps/web image updated</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">vikki@kubernetes1:~$</span><span class="w"> </span>kubectl get pod <span class="nt">-w</span> <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
<span class="go">NAME READY STATUS RESTARTS AGE
web-0 1/1 Running 0 9m57s
web-1 1/1 Running 0 9m55s
web-2 1/1 Running 0 4m32s
web-2 1/1 Terminating 0 5m29s
web-2 0/1 Terminating 0 5m30s
web-2 0/1 Terminating 0 5m39s
web-2 0/1 Terminating 0 5m39s
web-2 0/1 Pending 0 0s
web-2 0/1 Pending 0 0s
web-2 0/1 ContainerCreating 0 0s
web-2 0/1 ContainerCreating 0 1s
web-2 1/1 Running 0 32s
web-1 1/1 Terminating 0 11m
web-1 0/1 Terminating 0 11m
web-1 0/1 Terminating 0 11m
web-1 0/1 Terminating 0 11m
web-1 0/1 Pending 0 0s
web-1 0/1 Pending 0 0s
web-1 0/1 ContainerCreating 0 0s
web-1 0/1 ContainerCreating 0 1s
web-1 1/1 Running 0 2s
web-0 1/1 Terminating 0 11m
web-0 0/1 Terminating 0 11m
web-0 0/1 Terminating 0 11m
web-0 0/1 Terminating 0 11m
web-0 0/1 Pending 0 0s
web-0 0/1 Pending 0 0s
web-0 0/1 ContainerCreating 0 0s
web-0 0/1 ContainerCreating 0 1s
web-0 1/1 Running 0 2s</span></code></pre></figure>

<blockquote>
  <p>We can see from the above output the sequential order is preserved</p>
</blockquote>


</div>


<style>
    #share-buttons {
        display: inline-block;
        vertical-align: middle;
    }

    #share-buttons:after {
        content: "";
        display: block;
        clear: both;
    }

    #share-buttons>div {
        position: relative;
        text-align: left;
        height: 36px;
        width: 32px;
        float: left;
        text-align: center;
    }

    #share-buttons>div>svg {
        height: 16px;
        fill: #d5d5d5;
        margin-top: 10px;
    }

    #share-buttons>div:hover {
        cursor: pointer;
    }

    #share-buttons>div.facebook:hover>svg {
        fill: #3B5998;
    }

    #share-buttons>div.twitter:hover>svg {
        fill: #55ACEE;
    }

    #share-buttons>div.linkedin:hover>svg {
        fill: #0077b5;
    }

    #share-buttons>div.pinterest:hover>svg {
        fill: #CB2027;
    }

    #share-buttons>div.gplus:hover>svg {
        fill: #dd4b39;
    }

    #share-buttons>div.mail:hover>svg {
        fill: #7D7D7D;
    }

    #share-buttons>div.instagram:hover>svg {
        fill: #C73B92;
    }

    #share-buttons>div.facebook>svg {
        height: 18px;
        margin-top: 9px;
    }

    #share-buttons>div.twitter>svg {
        height: 20px;
        margin-top: 8px;
    }

    #share-buttons>div.linkedin>svg {
        height: 19px;
        margin-top: 7px;
    }

    #share-buttons>div.pinterest>svg {
        height: 20px;
        margin-top: 9px;
    }

    #share-buttons>div.gplus>svg {
        height: 17px;
        margin-top: 9px;
        position: relative;
        left: 1px;
    }

    #share-buttons>div.mail>svg {
        height: 14px;
        margin-top: 11px;
    }
</style>

<span style="color: #353535;">Share on: </span>
<div id="share-buttons">
    
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <!--<div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>-->
    <div class="twitter" title="Share this on Twitter" onclick="window.open('https://twitter.com/intent/tweet?text=Kubernetes stateful set with local-storage persistent volume&url=http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    <!--
    
    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://0.0.0.0:4000/kubernetes-stateful-set-with-local-storage-persistent-volume/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
    -->
    

</div>
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	/* #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;} */
    #mc_embed_signup{clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://vikki.us10.list-manage.com/subscribe/post?u=95b2d364576fdf5e25e704170&amp;id=905f0eae6d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<label for="mce-EMAIL">Subscribe to Vikki's blog</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_95b2d364576fdf5e25e704170_905f0eae6d" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->


  <!-- Start disqus -->
<script src="/assets/js/disqusLoader.js" /></script>
<div id="disqus_thread"><h3>Discussion and feedback</h3></div>
<div class="disqus"></div>
<script>
    disqusLoader('.disqus', {
        scriptUrl: 'https://vikkiblog.disqus.com/embed.js'
    });
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!-- End disqus -->


<div class="pagination">
  
    <a href="/pod-scheduling-in-kubernetes-detailed-step-by-step/" class="left arrow">&#8592;</a>
  
  
    <a href="/creating-persistent-local-storage-volume-in-kubernetes/" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>
    </main>

    <!--<footer >
  <span>
        &copy; <time datetime="2025-07-31 10:44:18 +0000">2025</time> . Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>-->

<footer class="footer">
    <div class="footer--section">
        <!--
      
      <a href=https://twitter.com/vikkiintweet> <svg viewBox="0 0 64 64" class="footer--icon">
           <path data-name="layer1"
  d="M64 13.194a23.1 23.1 0 0 1-7.3 2.1 14.119 14.119 0 0 0 5.5-7.2c-1.9 1.2-6.1 2.9-8.2 2.9a13.782 13.782 0 0 0-9.6-4 13.187 13.187 0 0 0-13.2 13.2 13.576 13.576 0 0 0 .3 2.9c-9.9-.3-21.5-5.2-28-13.7a13.206 13.206 0 0 0 4 17.4c-1.5.2-4.4-.1-5.7-1.4-.1 4.6 2.1 10.7 10.2 12.9-1.6.8-4.3.6-5.5.4.4 3.9 5.9 9 11.8 9-2.1 2.4-9.3 6.9-18.3 5.5a39.825 39.825 0 0 0 20.7 5.8 36.8 36.8 0 0 0 37-38.6v-.5a22.861 22.861 0 0 0 6.3-6.7z"
  fill="#4f80ff"></path>
          </svg>
      </a>
  </div>
  <div class="footer--section">
      
      <a href=https://github.com/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
          xmlns="http://www.w3.org/2000/svg">
          <path data-name="layer2"
  d="M32 0a32.021 32.021 0 0 0-10.1 62.4c1.6.3 2.2-.7 2.2-1.5v-6c-8.9 1.9-10.8-3.8-10.8-3.8-1.5-3.7-3.6-4.7-3.6-4.7-2.9-2 .2-1.9.2-1.9 3.2.2 4.9 3.3 4.9 3.3 2.9 4.9 7.5 3.5 9.3 2.7a6.93 6.93 0 0 1 2-4.3c-7.1-.8-14.6-3.6-14.6-15.8a12.27 12.27 0 0 1 3.3-8.6 11.965 11.965 0 0 1 .3-8.5s2.7-.9 8.8 3.3a30.873 30.873 0 0 1 8-1.1 30.292 30.292 0 0 1 8 1.1c6.1-4.1 8.8-3.3 8.8-3.3a11.965 11.965 0 0 1 .3 8.5 12.1 12.1 0 0 1 3.3 8.6c0 12.3-7.5 15-14.6 15.8a7.746 7.746 0 0 1 2.2 5.9v8.8c0 .9.6 1.8 2.2 1.5A32.021 32.021 0 0 0 32 0z"
  fill="#2d2d2d"></path>
  <path data-name="layer1" d="M12.1 45.9c-.1.2-.3.2-.5.1s-.4-.3-.3-.5.3-.2.6-.1c.2.2.3.4.2.5zm1.3 1.5a.589.589 0 0 1-.8-.8.631.631 0 0 1 .7.1.494.494 0 0 1 .1.7zm1.3 1.8a.585.585 0 0 1-.7-.3.6.6 0 0 1 0-.8.585.585 0 0 1 .7.3c.2.3.2.7 0 .8zm1.7 1.8c-.2.2-.5.1-.8-.1-.3-.3-.4-.6-.2-.8a.619.619 0 0 1 .8.1.554.554 0 0 1 .2.8zm2.4 1c-.1.3-.4.4-.8.3s-.6-.4-.5-.7.4-.4.8-.3c.3.2.6.5.5.7zm2.6.2c0 .3-.3.5-.7.5s-.7-.2-.7-.5.3-.5.7-.5c.4.1.7.3.7.5zm2.4-.4q0 .45-.6.6a.691.691 0 0 1-.8-.3q0-.45.6-.6c.5-.1.8.1.8.3z"></path>
          </svg>
      </a>
  </div>
  <div class="footer--section">
      
      <a href=https://www.youtube.com/c/vigneshragupathy> <svg class="footer--icon"
          viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
          <path data-name="layer1"
  d="M50.708 9H13.292A13.25 13.25 0 0 0 0 22.207v18.586A13.25 13.25 0 0 0 13.292 54h37.416A13.25 13.25 0 0 0 64 40.793V22.207A13.25 13.25 0 0 0 50.708 9zm-8.989 23.4l-17.501 8.3a.7.7 0 0 1-1.005-.63V22.962a.7.7 0 0 1 1.02-.623l17.5 8.812a.7.7 0 0 1-.015 1.253zm0 0"
  fill="#f61c0d"></path>
          </svg>
      </a>
  </div>

  <div class="footer--section">
    
    <a href=https://www.linkedin.com/in/vigneshragupathy> <svg class="footer--icon"
        viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <path data-name="layer1"
  fill="#0077b7" d="M1.15 21.7h13V61h-13zm46.55-1.3c-5.7 0-9.1 2.1-12.7 6.7v-5.4H22V61h13.1V39.7c0-4.5 2.3-8.9 7.5-8.9s8.3 4.4 8.3 8.8V61H64V38.7c0-15.5-10.5-18.3-16.3-18.3zM7.7 2.6C3.4 2.6 0 5.7 0 9.5s3.4 6.9 7.7 6.9 7.7-3.1 7.7-6.9S12 2.6 7.7 2.6z"></path>
        </svg>
          </a>
</div>
  <div class="footer--section">
      
      <a href="http://0.0.0.0:4000/feed.xml">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
              y="0px" viewBox="0 0 64 64" class="footer--icon" xml:space="preserve">
              <path data-name="layer1"
  d="M8.6 46.746a8.627 8.627 0 1 0 8.6 8.627 8.678 8.678 0 0 0-8.6-8.627zM.7 21.567H.2V33.5h.5a29.836 29.836 0 0 1 29.8 29.8v.7h11.9v-.7A41.719 41.719 0 0 0 .7 21.567z"
  fill="#ff8900"></path>
  <path data-name="layer1" d="M.7 0H.2v11.937h.5A51.4 51.4 0 0 1 52 63.3v.7h12v-.7A63.369 63.369 0 0 0 .7 0z"
  fill="#ff8900"></path>
          </svg>
      </a>
      -->
        
        <a href=https://twitter.com/vikkiintweet> <svg viewBox="0 0 64 64" class="footer--icon">
            <path data-name="layer1"
                d="M64 13.194a23.1 23.1 0 0 1-7.3 2.1 14.119 14.119 0 0 0 5.5-7.2c-1.9 1.2-6.1 2.9-8.2 2.9a13.782 13.782 0 0 0-9.6-4 13.187 13.187 0 0 0-13.2 13.2 13.576 13.576 0 0 0 .3 2.9c-9.9-.3-21.5-5.2-28-13.7a13.206 13.206 0 0 0 4 17.4c-1.5.2-4.4-.1-5.7-1.4-.1 4.6 2.1 10.7 10.2 12.9-1.6.8-4.3.6-5.5.4.4 3.9 5.9 9 11.8 9-2.1 2.4-9.3 6.9-18.3 5.5a39.825 39.825 0 0 0 20.7 5.8 36.8 36.8 0 0 0 37-38.6v-.5a22.861 22.861 0 0 0 6.3-6.7z"
                fill="#202020"></path>
            </svg>
        </a>
    </div>
    <div class="footer--section">
        
        <a href=https://github.com/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg">
            <path data-name="layer2"
                d="M32 0a32.021 32.021 0 0 0-10.1 62.4c1.6.3 2.2-.7 2.2-1.5v-6c-8.9 1.9-10.8-3.8-10.8-3.8-1.5-3.7-3.6-4.7-3.6-4.7-2.9-2 .2-1.9.2-1.9 3.2.2 4.9 3.3 4.9 3.3 2.9 4.9 7.5 3.5 9.3 2.7a6.93 6.93 0 0 1 2-4.3c-7.1-.8-14.6-3.6-14.6-15.8a12.27 12.27 0 0 1 3.3-8.6 11.965 11.965 0 0 1 .3-8.5s2.7-.9 8.8 3.3a30.873 30.873 0 0 1 8-1.1 30.292 30.292 0 0 1 8 1.1c6.1-4.1 8.8-3.3 8.8-3.3a11.965 11.965 0 0 1 .3 8.5 12.1 12.1 0 0 1 3.3 8.6c0 12.3-7.5 15-14.6 15.8a7.746 7.746 0 0 1 2.2 5.9v8.8c0 .9.6 1.8 2.2 1.5A32.021 32.021 0 0 0 32 0z"
                fill="#202020"></path>
            <path data-name="layer1"
                d="M12.1 45.9c-.1.2-.3.2-.5.1s-.4-.3-.3-.5.3-.2.6-.1c.2.2.3.4.2.5zm1.3 1.5a.589.589 0 0 1-.8-.8.631.631 0 0 1 .7.1.494.494 0 0 1 .1.7zm1.3 1.8a.585.585 0 0 1-.7-.3.6.6 0 0 1 0-.8.585.585 0 0 1 .7.3c.2.3.2.7 0 .8zm1.7 1.8c-.2.2-.5.1-.8-.1-.3-.3-.4-.6-.2-.8a.619.619 0 0 1 .8.1.554.554 0 0 1 .2.8zm2.4 1c-.1.3-.4.4-.8.3s-.6-.4-.5-.7.4-.4.8-.3c.3.2.6.5.5.7zm2.6.2c0 .3-.3.5-.7.5s-.7-.2-.7-.5.3-.5.7-.5c.4.1.7.3.7.5zm2.4-.4q0 .45-.6.6a.691.691 0 0 1-.8-.3q0-.45.6-.6c.5-.1.8.1.8.3z">
            </path>
            </svg>
        </a>
    </div>
    <div class="footer--section">
        
        <a href=https://www.youtube.com/c/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg">
            <path data-name="layer1"
                d="M50.708 9H13.292A13.25 13.25 0 0 0 0 22.207v18.586A13.25 13.25 0 0 0 13.292 54h37.416A13.25 13.25 0 0 0 64 40.793V22.207A13.25 13.25 0 0 0 50.708 9zm-8.989 23.4l-17.501 8.3a.7.7 0 0 1-1.005-.63V22.962a.7.7 0 0 1 1.02-.623l17.5 8.812a.7.7 0 0 1-.015 1.253zm0 0"
                fill="#202020"></path>
            </svg>
        </a>
    </div>

    <div class="footer--section">
        
        <a href=https://www.linkedin.com/in/vigneshragupathy> <svg class="footer--icon" viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg">
            <path data-name="layer1" fill="#202020"
                d="M1.15 21.7h13V61h-13zm46.55-1.3c-5.7 0-9.1 2.1-12.7 6.7v-5.4H22V61h13.1V39.7c0-4.5 2.3-8.9 7.5-8.9s8.3 4.4 8.3 8.8V61H64V38.7c0-15.5-10.5-18.3-16.3-18.3zM7.7 2.6C3.4 2.6 0 5.7 0 9.5s3.4 6.9 7.7 6.9 7.7-3.1 7.7-6.9S12 2.6 7.7 2.6z">
            </path>
            </svg>
        </a>
    </div>
    <div class="footer--section">
        
        <a href="http://0.0.0.0:4000/feed.xml">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                y="0px" viewBox="0 0 64 64" class="footer--icon" xml:space="preserve">
                <path data-name="layer1"
                    d="M8.6 46.746a8.627 8.627 0 1 0 8.6 8.627 8.678 8.678 0 0 0-8.6-8.627zM.7 21.567H.2V33.5h.5a29.836 29.836 0 0 1 29.8 29.8v.7h11.9v-.7A41.719 41.719 0 0 0 .7 21.567z"
                    fill="#202020"></path>
                <path data-name="layer1"
                    d="M.7 0H.2v11.937h.5A51.4 51.4 0 0 1 52 63.3v.7h12v-.7A63.369 63.369 0 0 0 .7 0z" fill="#202020">
                </path>
            </svg>
        </a>
    </div>
</footer>
  </body>
</html>
