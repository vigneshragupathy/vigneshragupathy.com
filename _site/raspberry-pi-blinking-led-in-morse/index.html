<p>In my previous post i described how i created high available replicated storage with raspberrypi<br />
In this post i will guide you how to interface raspberry pi to blink a led in morse code for the user input.The same signal fed into the LED can be send to a radio transmitter and we can transmit it in radio frequency . Recently i starter learning morse code and i am going to apply a license for Amateur radio operator.</p>

<h3 id="what-you-need">What you need:</h3>

<p>Raspberry PI Model 2 – 1GB<br />
Breadboard<br />
Jumper wires (Male to Female)<br />
LED<br />
220 ohm resistor</p>

<h3 id="assembling-the-circuit">Assembling the circuit:</h3>

<p>To make the LED programmable we need to use one of the GPIO pin from raspberry pi. More details on GPIO here.Python has a library “RPi.GPIO” to interface with raspberry pi. We are going to use this library to designates the GPIO pins to digital inputs or outputs. When a pin turns from LOW (0) to HIGH (1), it supplies a 3.3v signal.</p>

<p>Below is the pin diagram of the raspberry pi B+ model</p>

<!--kg-card-begin: image-->
<figure class="kg-card kg-image-card"><img src="/content/images/2017/11/Raspberry-Pi-GPIO-Layout-Model-B-Plus.png" class="kg-image" alt="Raspberry-Pi-GPIO-Layout-Model-B-Plus" /></figure>
<!--kg-card-end: image-->

<p>We are going to use the GPIO pin 4 and a ground to programably control the led. Connect resistor and led as per the below diagram.</p>

<p>Once the circuit is ready we can power on the raspberry pi and connect to pi using SSH or VNC.</p>

<p>Below is my final assembled circuit.</p>

<!--kg-card-begin: image-->
<figure class="kg-card kg-image-card"><img src="/content/images/2017/11/blog.vikki_.in_led_pi.jpg" class="kg-image" alt="blog.vikki_.in_led_pi" /></figure>
<!--kg-card-end: image-->

<h3 id="blinking-led-from-raspberry-pi">Blinking LED from raspberry pi</h3>

<p>Connect to raspberry pi using ssh or vnc, open vim and copy paste the below code and save it. But default vim don’t support syntax highlight in raspbian os,So modify the “vimrc” to enable syntax highlighting.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">pi@raspberrypi ~/vikki/python $</span><span class="w"> </span><span class="nb">sudo cat</span> /etc/vim/vimrc
<span class="go">" Vim5 and later versions support syntax highlighting. Uncommenting the next
" line enables syntax highlighting by default.
"syntax on
syntax on</span></code></pre></figure>

<p>Below is the python code to blink the led . You can download the updated code from my github.<br />
The code is explained inside in comment section.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="code"><pre><span class="c1"># Import the GPIO and time libraries
</span><span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="k">as</span> <span class="n">GPIO</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Set the pin designation type.
# In this case, we use BCM- the GPIO number- rather than the pin number itself.
</span><span class="n">GPIO</span><span class="p">.</span><span class="n">setmode</span> <span class="p">(</span><span class="n">GPIO</span><span class="p">.</span><span class="n">BCM</span><span class="p">)</span>

<span class="c1"># So that you don't need to manage non-descriptive numbers,
# set "LIGHT" to 4 so that our code can easily reference the correct pin.
</span><span class="n">LIGHT</span> <span class="o">=</span> <span class="mi">4</span>

<span class="c1"># Because GPIO pins can act as either digital inputs or outputs,
# we need to designate which way we want to use a given pin.
# This allows us to use functions in the GPIO library in order to properly send and receive signals.
</span><span class="n">GPIO</span><span class="p">.</span><span class="n">setup</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="n">GPIO</span><span class="p">.</span><span class="n">OUT</span><span class="p">)</span>


<span class="c1"># Cause the light to blink 7 times and print a message each time.
# To blink the light, we call GPIO.output and pass as parameters the pin number (LIGHT) and the state we want.
# True sets the pin to HIGH (sending a signal), False sets it to LOW.
# To achieve a blink, we set the pin to High, wait for a fraction of a second, then set it to Low.
# Adding keyboard interrupt with try and except so that program terminates when user presses Ctrl+C.
</span><span class="k">try</span><span class="p">:</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"blink"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
    <span class="n">GPIO</span><span class="p">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Now run the python code and verify the LED start blinking.</p>

<h3 id="demo-of-led-blinking-from-raspberry-pi">Demo of LED blinking from raspberry pi:</h3>

<!--kg-card-begin: embed-->
<figure class="kg-card kg-embed-card"><iframe width="480" height="270" src="https://www.youtube.com/embed/DnotTLN2qI8?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></figure>
<!--kg-card-end: embed-->
<h3 id="blinking-led-in-morse-for-user-input">Blinking LED in morse for user input:</h3>

<p>Once we are able to blink the led from python ,we need to blink it in morse for the user input. Below is the python code to blink the led for morse. You can download the updated code from my github.I just added few lines to the previous code to blink for morse.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
</pre></td><td class="code"><pre><span class="c1"># Import the GPIO and time libraries
</span><span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="k">as</span> <span class="n">GPIO</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1">#####Morse code ######
</span><span class="n">CODE</span> <span class="o">=</span> <span class="p">{</span><span class="s">' '</span><span class="p">:</span> <span class="s">' '</span><span class="p">,</span>
        <span class="s">"'"</span><span class="p">:</span> <span class="s">'.----.'</span><span class="p">,</span>
        <span class="s">'('</span><span class="p">:</span> <span class="s">'-.--.-'</span><span class="p">,</span>
        <span class="s">')'</span><span class="p">:</span> <span class="s">'-.--.-'</span><span class="p">,</span>
        <span class="s">','</span><span class="p">:</span> <span class="s">'--..--'</span><span class="p">,</span>
        <span class="s">'-'</span><span class="p">:</span> <span class="s">'-....-'</span><span class="p">,</span>
        <span class="s">'.'</span><span class="p">:</span> <span class="s">'.-.-.-'</span><span class="p">,</span>
        <span class="s">'/'</span><span class="p">:</span> <span class="s">'-..-.'</span><span class="p">,</span>
        <span class="s">'0'</span><span class="p">:</span> <span class="s">'-----'</span><span class="p">,</span>
        <span class="s">'1'</span><span class="p">:</span> <span class="s">'.----'</span><span class="p">,</span>
        <span class="s">'2'</span><span class="p">:</span> <span class="s">'..---'</span><span class="p">,</span>
        <span class="s">'3'</span><span class="p">:</span> <span class="s">'...--'</span><span class="p">,</span>
        <span class="s">'4'</span><span class="p">:</span> <span class="s">'....-'</span><span class="p">,</span>
        <span class="s">'5'</span><span class="p">:</span> <span class="s">'.....'</span><span class="p">,</span>
        <span class="s">'6'</span><span class="p">:</span> <span class="s">'-....'</span><span class="p">,</span>
        <span class="s">'7'</span><span class="p">:</span> <span class="s">'--...'</span><span class="p">,</span>
        <span class="s">'8'</span><span class="p">:</span> <span class="s">'---..'</span><span class="p">,</span>
        <span class="s">'9'</span><span class="p">:</span> <span class="s">'----.'</span><span class="p">,</span>
        <span class="s">':'</span><span class="p">:</span> <span class="s">'---...'</span><span class="p">,</span>
        <span class="s">';'</span><span class="p">:</span> <span class="s">'-.-.-.'</span><span class="p">,</span>
        <span class="s">'?'</span><span class="p">:</span> <span class="s">'..--..'</span><span class="p">,</span>
        <span class="s">'A'</span><span class="p">:</span> <span class="s">'.-'</span><span class="p">,</span>
        <span class="s">'B'</span><span class="p">:</span> <span class="s">'-...'</span><span class="p">,</span>
        <span class="s">'C'</span><span class="p">:</span> <span class="s">'-.-.'</span><span class="p">,</span>
        <span class="s">'D'</span><span class="p">:</span> <span class="s">'-..'</span><span class="p">,</span>
        <span class="s">'E'</span><span class="p">:</span> <span class="s">'.'</span><span class="p">,</span>
        <span class="s">'F'</span><span class="p">:</span> <span class="s">'..-.'</span><span class="p">,</span>
        <span class="s">'G'</span><span class="p">:</span> <span class="s">'--.'</span><span class="p">,</span>
        <span class="s">'H'</span><span class="p">:</span> <span class="s">'....'</span><span class="p">,</span>
        <span class="s">'I'</span><span class="p">:</span> <span class="s">'..'</span><span class="p">,</span>
        <span class="s">'J'</span><span class="p">:</span> <span class="s">'.---'</span><span class="p">,</span>
        <span class="s">'K'</span><span class="p">:</span> <span class="s">'-.-'</span><span class="p">,</span>
        <span class="s">'L'</span><span class="p">:</span> <span class="s">'.-..'</span><span class="p">,</span>
        <span class="s">'M'</span><span class="p">:</span> <span class="s">'--'</span><span class="p">,</span>
        <span class="s">'N'</span><span class="p">:</span> <span class="s">'-.'</span><span class="p">,</span>
        <span class="s">'O'</span><span class="p">:</span> <span class="s">'---'</span><span class="p">,</span>
        <span class="s">'P'</span><span class="p">:</span> <span class="s">'.--.'</span><span class="p">,</span>
        <span class="s">'Q'</span><span class="p">:</span> <span class="s">'--.-'</span><span class="p">,</span>
        <span class="s">'R'</span><span class="p">:</span> <span class="s">'.-.'</span><span class="p">,</span>
        <span class="s">'S'</span><span class="p">:</span> <span class="s">'...'</span><span class="p">,</span>
        <span class="s">'T'</span><span class="p">:</span> <span class="s">'-'</span><span class="p">,</span>
        <span class="s">'U'</span><span class="p">:</span> <span class="s">'..-'</span><span class="p">,</span>
        <span class="s">'V'</span><span class="p">:</span> <span class="s">'...-'</span><span class="p">,</span>
        <span class="s">'W'</span><span class="p">:</span> <span class="s">'.--'</span><span class="p">,</span>
        <span class="s">'X'</span><span class="p">:</span> <span class="s">'-..-'</span><span class="p">,</span>
        <span class="s">'Y'</span><span class="p">:</span> <span class="s">'-.--'</span><span class="p">,</span>
        <span class="s">'Z'</span><span class="p">:</span> <span class="s">'--..'</span><span class="p">,</span>
        <span class="s">'_'</span><span class="p">:</span> <span class="s">'..--.-'</span><span class="p">}</span>
<span class="c1">######End of morse code######
</span>
<span class="c1"># Set the pin designation type.
# In this case, we use BCM- the GPIO number- rather than the pin number itself.
</span><span class="n">GPIO</span><span class="p">.</span><span class="n">setmode</span> <span class="p">(</span><span class="n">GPIO</span><span class="p">.</span><span class="n">BCM</span><span class="p">)</span>

<span class="c1"># So that you don't need to manage non-descriptive numbers,
# set "LIGHT" to 4 so that our code can easily reference the correct pin.
</span><span class="n">LIGHT</span> <span class="o">=</span> <span class="mi">4</span>

<span class="c1"># Because GPIO pins can act as either digital inputs or outputs,
# we need to designate which way we want to use a given pin.
# This allows us to use functions in the GPIO library in order to properly send and receive signals.
</span><span class="n">GPIO</span><span class="p">.</span><span class="n">setup</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="n">GPIO</span><span class="p">.</span><span class="n">OUT</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">dot</span><span class="p">():</span>
        <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">dash</span><span class="p">():</span>
        <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="n">LIGHT</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'What would you like to send? '</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">CODE</span><span class="p">[</span><span class="n">letter</span><span class="p">.</span><span class="n">upper</span><span class="p">()]:</span>
                <span class="k">if</span> <span class="n">symbol</span> <span class="o">==</span> <span class="s">'-'</span><span class="p">:</span>
                    <span class="n">dash</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="s">'.'</span><span class="p">:</span>
                    <span class="n">dot</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
    <span class="n">GPIO</span><span class="p">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h3 id="demo-of-led-blinking-in-morse-for-the-user-input">Demo of LED blinking in Morse for the user input:</h3>
<!--kg-card-begin: embed-->
<figure class="kg-card kg-embed-card"><iframe width="480" height="270" src="https://www.youtube.com/embed/n6KE4-SODCg?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></figure>
<!--kg-card-end: embed-->
